# This blueprint defines a single web service.
# The database is external (Aiven) and its credentials should be set in the Render dashboard.
services:
  - type: web
    name: culture-benin
    env: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    region: frankfurt
    plan: free
    healthCheckPath: /
    autoDeploy: true
    buildFilter:
      paths:
        - "app/**"
        - "config/**"
        - "routes/**"
        - "resources/**"
        - "database/**"
        - "public/**"
        - "composer.json"
        - "composer.lock"
        - "package.json"
        - "package-lock.json"
        - "Dockerfile"
        - "entrypoint.sh"
    disk:
      name: storage
      mountPath: /var/www/html/storage
      sizeGB: 1
    envVars:
      # This variable tells Laravel where to find the Aiven CA certificate
      # that we download in the Dockerfile.
      - key: MYSQL_ATTR_SSL_CA
        value: /etc/ssl/certs/aiven-ca.pem
